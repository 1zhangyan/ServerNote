# 自动化测试与性能测试 
## 自动化测试的分类
- 易化的冰淇凌
- 沙漏
- 测试金字塔 7：2：1

## 谷歌金字塔
- 小规模测试 ：测试代码和待测代码跑在同一进程中
- 中 ：测试代码跑在同一个机器
- 大 ：跑在不同的节点
> 测试层次越低 成本越小

## 微服务的测试
### 单元测试：自己写的代码自己写单元测试  经验值80percent的覆盖率即可
   - 结构化表达： given准备->when触发时机->then需要达到什么目的
   - 测接口 不是实现
   - 测状态 不是交付 代码重构了之后 测试用例需要改（只要业务逻辑不变 测试用例就应该不变）
   - DAMP(描述清晰的表达 eg.builder) No DRY(不要重复) 测试中重复可以 但是要清晰
   - 独立可以理解 

### Test-Double测试替身：
场景：单元测试依赖的组件有问题
- 组件速度慢  
- 待测系统有不确定性(没有幂等)
- 构造启动极其复杂 
#### faking
- 第三方依赖慢或者无法在本地启动
- 理论上谁提供谁写 非提供者写的话，不知道真实实现一致且提供方发生变化就不准了，可能会导致线上P0测试用例还能过
- 使用者数量越多，faking的必要性就越强
- Faking也需要被测试 且最重要的就是它的保真
#### stubbing 
指定第三方依赖应该达到的状态
#### Mock

### 集成测试
- 保证要集成的组件可以在本地启动
- 不能在本地启动的组件用TestDouble+契约测试的方式替代
> 保证测试和线上使用的尽可能一致

### 服务测试

